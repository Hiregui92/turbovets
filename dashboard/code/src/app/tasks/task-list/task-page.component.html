<div class="flex items-center gap-3 mb-6">
  <button 
    (click)="setViewMode('list')" 
    class="px-4 py-2 rounded-xl shadow-sm transition 
           hover:shadow-md 
           focus:outline-none focus:ring-2 focus:ring-blue-500
           "
    [ngClass]="viewMode === 'list' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-700'">
    Lista
  </button>

  <button 
    (click)="setViewMode('kanban')" 
    class="px-4 py-2 rounded-xl shadow-sm transition 
           hover:shadow-md 
           focus:outline-none focus:ring-2 focus:ring-blue-500
           "
    [ngClass]="viewMode === 'kanban' ? 'bg-blue-600 text-white' : 'bg-gray-200 text-gray-700'">
    Kanban
  </button>

  <button 
    (click)="goToNewTask()"
    [disabled]="!auth.hasPermission('task.create')"
    class="px-3 py-1 rounded-lg hover:bg-blue-700"
    [ngClass]="auth.hasPermission('task.create') ? 'bg-blue-600 text-white' : 'bg-gray-300 text-gray-500 cursor-not-allowed'">
    + New Task
  </button>

  <!-- Search -->
  <input
    type="text"
    [(ngModel)]="searchTerm"
    placeholder="Search tasks..."
    class="w-full sm:w-1/3 p-2 border rounded-lg dark:bg-gray-700 dark:text-white"
  />

  <!-- Status filter -->
  <select
    [(ngModel)]="selectedStatus"
    class="p-2 border rounded-lg dark:bg-gray-700 dark:text-white"
  >
    <option value="all">All</option>
    <option value="todo">To Do</option>
    <option value="in-progress">In Progress</option>
    <option value="done">Done</option>
  </select>

  <!-- Sort -->
  <button
    (click)="toggleSort()"
    class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
  >
    Sort {{ sortDirection === 'asc' ? '▲' : '▼' }}
  </button>
</div>

<div class="w-full">
  <app-tasks-list *ngIf="viewMode === 'list'" [tasks]="filteredTasks"></app-tasks-list>
  <app-tasks-kanban *ngIf="viewMode === 'kanban'" [tasks]="filteredTasks"></app-tasks-kanban>
</div>

